(this["webpackJsonpadriancleung-app"]=this["webpackJsonpadriancleung-app"]||[]).push([[10],{112:function(e,t,a){"use strict";a.d(t,"d",(function(){return n})),a.d(t,"c",(function(){return r})),a.d(t,"e",(function(){return c})),a.d(t,"f",(function(){return u})),a.d(t,"a",(function(){return i})),a.d(t,"b",(function(){return o}));var n=200,r="INVALID_TOKEN",c="VALID_TOKEN",u=/^(([^<>()[\]\\.,;:\s@"]+(\.[^<>()[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/,i="https://api.adrianleung.dev",o="https://api.github.com"},118:function(e,t,a){"use strict";a.d(t,"c",(function(){return l})),a.d(t,"d",(function(){return p})),a.d(t,"b",(function(){return m})),a.d(t,"a",(function(){return f}));var n=a(119),r=a.n(n),c=a(122),u=a(123),i=a.n(u),o=a(112),s=a(120),l=function(){var e=Object(c.a)(r.a.mark((function e(t,a){var n;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,i.a.post("".concat(o.a,"/auth/login"),{email:t,password:a});case 2:return(n=e.sent).data.accessToken&&localStorage.setItem("user",JSON.stringify(n.data)),e.abrupt("return",n.data);case 5:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}(),d=function(){var e=Object(c.a)(r.a.mark((function e(){return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,i.a.post("".concat(o.a,"/auth/verify"),null,{headers:Object(s.a)()});case 3:if(e.sent.data.userId!==m().id){e.next=8;break}return e.abrupt("return",o.e);case 8:return e.abrupt("return",o.c);case 9:e.next=14;break;case 11:return e.prev=11,e.t0=e.catch(0),e.abrupt("return",o.c);case 14:case"end":return e.stop()}}),e,null,[[0,11]])})));return function(){return e.apply(this,arguments)}}(),p=function(){localStorage.removeItem("user")},m=function(){return JSON.parse(localStorage.getItem("user"))},f=function(){if(!m())return o.c;d().then((function(e){return e}))}},120:function(e,t,a){"use strict";var n=a(118);t.a=function(){var e=Object(n.b)();return e&&e.accessToken?{"x-access-token":e.accessToken}:{}}},291:function(e,t,a){"use strict";a.r(t);var n=a(121),r=a(0),c=a.n(r),u=a(101),i=a(166),o=a(267),s=a(285),l=a(288),d=a(126);function p(){return(p=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e}).apply(this,arguments)}var m=function(e){return c.a.createElement(d.a,p({viewBox:"0 0 24 24",a11yTitle:"UserAdmin"},e),c.a.createElement("path",{fill:"none",stroke:"#000",strokeWidth:"2",d:"M8,11 C10.7614237,11 13,8.76142375 13,6 C13,3.23857625 10.7614237,1 8,1 C5.23857625,1 3,3.23857625 3,6 C3,8.76142375 5.23857625,11 8,11 Z M13.0233822,13.0234994 C11.7718684,11.7594056 10.0125018,11 8,11 C4,11 1,14 1,18 L1,23 L8,23 M10,19.5 C10,20.88 11.12,22 12.5,22 C13.881,22 15,20.88 15,19.5 C15,18.119 13.881,17 12.5,17 C11.12,17 10,18.119 10,19.5 L10,19.5 Z M23,15 L20,12 L14,18 M17.5,14.5 L20.5,17.5 L17.5,14.5 Z"}))},f=a(118),h=a(7),b=a(112);t.default=function(e){var t=Object(h.g)(),a=Object(r.useState)(!1),d=Object(n.a)(a,2),p=d[0],g=d[1],v=Object(r.useState)({email:"",password:""}),w=Object(n.a)(v,2),O=w[0],E=w[1],j=Object(r.useState)(!0),k=Object(n.a)(j,2),y=k[0],C=k[1];return Object(r.useEffect)((function(){Object(f.a)()===b.e&&g(!0)}),[]),p?c.a.createElement(h.a,{to:"/admin"}):c.a.createElement(u.a,{width:"100vw",height:"100vh",background:"dark-3",justify:"center",align:"center"},c.a.createElement(u.a,{width:"medium",height:"medium",background:"white",round:"medium",pad:"small",gap:"medium",align:"center",border:!0},c.a.createElement(m,{size:"large"}),c.a.createElement(i.a,null,"Welcome!"),c.a.createElement(u.a,{height:"100%"},c.a.createElement(o.a,{value:O,onSubmit:function(){Object(f.c)(O.email,O.password).then((function(e){null!==e.accessToken?t.push("/admin"):C(!1)})).catch((function(){C(!1)}))},onChange:function(e){return E(e)}},c.a.createElement(u.a,{height:"100%",gap:"medium"},c.a.createElement(u.a,{gap:"small"},c.a.createElement(s.a,{name:"email",placeholder:"Username",type:"email",autoComplete:"email"}),c.a.createElement(s.a,{name:"password",placeholder:"Password",type:"password",autoComplete:"password"})),c.a.createElement(i.a,{color:"red",hidden:y},"Incorrect username or password"),c.a.createElement(u.a,{direction:"row",justify:"center"},c.a.createElement(l.a,{plain:!0,label:"Login",type:"submit"})))))))}}}]);
//# sourceMappingURL=10.10a8197a.chunk.js.map