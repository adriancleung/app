{"version":3,"sources":["constants.js","services/auth.js","utils/authHeader.js","routes/Logout.js"],"names":["SUCCESS_CODE","INVALID_TOKEN","VALID_TOKEN","emailRegExp","API_URL","process","GITHUB_API","login","email","password","a","axios","post","res","data","accessToken","localStorage","setItem","JSON","stringify","verifyToken","headers","authHeader","userId","getCurrentUser","id","logout","removeItem","parse","getItem","checkAuth","then","value","user","Logout","_props","useEffect","to"],"mappings":"6HAAA,4MAAO,IAAMA,EAAe,IAKfC,EAAgB,gBAChBC,EAAc,cAEdC,EAAc,wJAEdC,EAAUC,8BACVC,EAAa,0B,4OCPpBC,EAAK,uCAAG,WAAOC,EAAOC,GAAd,eAAAC,EAAA,sEACMC,IAAMC,KAAN,UAAcR,IAAd,eAAoC,CAAEI,QAAOC,aADnD,cACNI,EADM,QAEJC,KAAKC,aACXC,aAAaC,QAAQ,OAAQC,KAAKC,UAAUN,EAAIC,OAHtC,kBAKLD,EAAIC,MALC,2CAAH,wDAQLM,EAAW,uCAAG,sBAAAV,EAAA,+EAEEC,IAAMC,KAAN,UAAcR,IAAd,gBAAqC,KAAM,CAC3DiB,QAASC,gBAHK,iBAKRR,KAAKS,SAAWC,IAAiBC,GALzB,yCAMPvB,KANO,gCAQPD,KARO,kFAWTA,KAXS,0DAAH,qDAeXyB,EAAS,WACbV,aAAaW,WAAW,SAGpBH,EAAiB,WACrB,OAAON,KAAKU,MAAMZ,aAAaa,QAAQ,UAGnCC,EAAY,WAChB,IAAIN,IAKF,OAAOvB,IAJPmB,IAAcW,MAAK,SAAAC,GACjB,OAAOA,O,iCCtCb,aAYeV,IAVI,WACjB,IAAMW,EAAOT,cAEb,OAAIS,GAAQA,EAAKlB,YACR,CAAE,iBAAkBkB,EAAKlB,aAEzB,K,iCCRX,2CAYemB,UARA,SAAAC,GAKb,OAJAC,qBAAU,WACRV,gBACC,IAEI,kBAAC,IAAD,CAAUW,GAAI","file":"static/js/11.27aad8de.chunk.js","sourcesContent":["export const SUCCESS_CODE = 200;\nexport const UNAUTHORIZED = 401;\nexport const FORBIDDEN = 403;\nexport const SERVER_ERROR = 500;\n\nexport const INVALID_TOKEN = 'INVALID_TOKEN';\nexport const VALID_TOKEN = 'VALID_TOKEN';\n\nexport const emailRegExp = /^(([^<>()[\\]\\\\.,;:\\s@\"]+(\\.[^<>()[\\]\\\\.,;:\\s@\"]+)*)|(\".+\"))@((\\[[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}\\])|(([a-zA-Z\\-0-9]+\\.)+[a-zA-Z]{2,}))$/;\n\nexport const API_URL = process.env.REACT_APP_API_URL;\nexport const GITHUB_API = 'https://api.github.com';\n","import axios from 'axios';\nimport { API_URL, INVALID_TOKEN, VALID_TOKEN } from '../constants';\nimport authHeader from '../utils/authHeader';\n\nconst login = async (email, password) => {\n  const res = await axios.post(`${API_URL}/auth/login`, { email, password });\n  if (res.data.accessToken) {\n    localStorage.setItem('user', JSON.stringify(res.data));\n  }\n  return res.data;\n};\n\nconst verifyToken = async () => {\n  try {\n    const res = await axios.post(`${API_URL}/auth/verify`, null, {\n      headers: authHeader(),\n    });\n    if (res.data.userId === getCurrentUser().id) {\n      return VALID_TOKEN;\n    } else {\n      return INVALID_TOKEN;\n    }\n  } catch (err) {\n    return INVALID_TOKEN;\n  }\n};\n\nconst logout = () => {\n  localStorage.removeItem('user');\n};\n\nconst getCurrentUser = () => {\n  return JSON.parse(localStorage.getItem('user'));\n};\n\nconst checkAuth = () => {\n  if (getCurrentUser()) {\n    verifyToken().then(value => {\n      return value;\n    });\n  } else {\n    return INVALID_TOKEN;\n  }\n};\n\nexport { login, verifyToken, logout, getCurrentUser, checkAuth };\n","import { getCurrentUser } from '../services/auth';\n\nconst authHeader = () => {\n  const user = getCurrentUser();\n\n  if (user && user.accessToken) {\n    return { 'x-access-token': user.accessToken };\n  } else {\n    return {};\n  }\n};\n\nexport default authHeader;\n","import React, { useEffect } from 'react';\nimport { Redirect } from 'react-router-dom';\nimport { logout } from '../services/auth';\n\nconst Logout = _props => {\n  useEffect(() => {\n    logout();\n  }, []);\n\n  return <Redirect to={'/login'} />;\n};\n\nexport default Logout;\n"],"sourceRoot":""}