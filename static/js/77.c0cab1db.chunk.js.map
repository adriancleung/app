{"version":3,"file":"static/js/77.c0cab1db.chunk.js","mappings":"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","sources":["constants.js","../node_modules/grommet-icons/es6/icons/UserAdmin.js","routes/Login.js","services/auth.js","utils/authHeader.js"],"sourcesContent":["export const SUCCESS_CODE = 200;\nexport const UNAUTHORIZED = 401;\nexport const FORBIDDEN = 403;\nexport const SERVER_ERROR = 500;\n\nexport const INVALID_TOKEN = 'INVALID_TOKEN';\nexport const VALID_TOKEN = 'VALID_TOKEN';\n\nexport const emailRegExp = /^(([^<>()[\\]\\\\.,;:\\s@\"]+(\\.[^<>()[\\]\\\\.,;:\\s@\"]+)*)|(\".+\"))@((\\[[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}\\])|(([a-zA-Z\\-0-9]+\\.)+[a-zA-Z]{2,}))$/;\n\nexport const API_URL = process.env.REACT_APP_API_URL;\nexport const GITHUB_API = 'https://api.github.com';\n","function _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nimport React, { forwardRef } from 'react';\nimport { StyledIcon } from '../StyledIcon';\nvar UserAdmin = /*#__PURE__*/forwardRef(function (props, ref) {\n  return /*#__PURE__*/React.createElement(StyledIcon, _extends({\n    ref: ref,\n    viewBox: \"0 0 24 24\",\n    a11yTitle: \"UserAdmin\"\n  }, props), /*#__PURE__*/React.createElement(\"path\", {\n    fill: \"none\",\n    stroke: \"#000\",\n    strokeWidth: \"2\",\n    d: \"M8 11A5 5 0 1 0 8 1a5 5 0 0 0 0 10zm5.023 2.023C11.772 11.76 10.013 11 8 11c-4 0-7 3-7 7v5h7m2-3.5a2.5 2.5 0 1 0 5.002-.002A2.5 2.5 0 0 0 10 19.5zM23 15l-3-3-6 6m3.5-3.5 3 3-3-3z\"\n  }));\n});\nUserAdmin.displayName = 'UserAdmin';\nexport { UserAdmin };","import React, { useState, useEffect } from 'react';\nimport { Box, Text, Button, Form, FormField } from 'grommet';\nimport { UserAdmin } from 'grommet-icons';\nimport { login, checkAuth } from '../services/auth';\nimport { Navigate, useNavigate } from 'react-router-dom';\nimport { VALID_TOKEN } from '../constants';\n\nconst Login = _props => {\n  const navigate = useNavigate();\n  const [redirect, setRedirect] = useState(false);\n  const [loginInfo, setLoginInfo] = useState({ email: '', password: '' });\n  const [hideIncorrect, setHideIncorrect] = useState(true);\n\n  const handleLogin = () => {\n    login(loginInfo.email, loginInfo.password)\n      .then(result => {\n        if (result.accessToken !== null) {\n          navigate('/admin');\n        } else {\n          setHideIncorrect(false);\n        }\n      })\n      .catch(() => {\n        setHideIncorrect(false);\n      });\n  };\n\n  useEffect(() => {\n    const validate = async () => {\n      if (checkAuth() === VALID_TOKEN) {\n        setRedirect(true);\n      }\n    };\n    validate();\n  }, []);\n\n  return redirect ? (\n    <Navigate to={'/admin'} />\n  ) : (\n    <Box\n      width={'100vw'}\n      height={'100vh'}\n      background={'dark-3'}\n      justify={'center'}\n      align={'center'}>\n      <Box\n        width={'medium'}\n        height={'medium'}\n        background={'white'}\n        round={'medium'}\n        pad={'small'}\n        gap={'medium'}\n        align={'center'}\n        border={true}>\n        <UserAdmin size={'large'} />\n        <Text>Welcome!</Text>\n        <Box height={'100%'}>\n          <Form\n            value={loginInfo}\n            onSubmit={() => handleLogin()}\n            onChange={value => setLoginInfo(value)}>\n            <Box height={'100%'} gap={'medium'}>\n              <Box gap={'small'}>\n                <FormField\n                  name={'email'}\n                  placeholder={'Username'}\n                  type={'email'}\n                  autoComplete={'email'}\n                />\n                <FormField\n                  name={'password'}\n                  placeholder={'Password'}\n                  type={'password'}\n                  autoComplete={'password'}\n                />\n              </Box>\n              <Text color={'red'} hidden={hideIncorrect}>\n                Incorrect username or password\n              </Text>\n              <Box direction={'row'} justify={'center'}>\n                <Button plain label={'Login'} type={'submit'} />\n              </Box>\n            </Box>\n          </Form>\n        </Box>\n      </Box>\n    </Box>\n  );\n};\n\nexport default Login;\n","import axios from 'axios';\nimport { API_URL, INVALID_TOKEN, VALID_TOKEN } from '../constants';\nimport authHeader from '../utils/authHeader';\n\nconst login = async (email, password) => {\n  const res = await axios.post(`${API_URL}/auth/login`, { email, password });\n  if (res.data.accessToken) {\n    localStorage.setItem('user', JSON.stringify(res.data));\n  }\n  return res.data;\n};\n\nconst verifyToken = async () => {\n  try {\n    const res = await axios.post(`${API_URL}/auth/verify`, null, {\n      headers: authHeader(),\n    });\n    if (res.data.userId === getCurrentUser().id) {\n      return VALID_TOKEN;\n    } else {\n      return INVALID_TOKEN;\n    }\n  } catch (err) {\n    return INVALID_TOKEN;\n  }\n};\n\nconst logout = () => {\n  localStorage.removeItem('user');\n};\n\nconst getCurrentUser = () => {\n  return JSON.parse(localStorage.getItem('user'));\n};\n\nconst checkAuth = async () => {\n  if (getCurrentUser()) {\n    try {\n      const value = await verifyToken();\n      return value;\n    } catch (error) {\n      return INVALID_TOKEN;\n    }\n  } else {\n    return INVALID_TOKEN;\n  }\n};\n\nexport { login, verifyToken, logout, getCurrentUser, checkAuth };\n","import { getCurrentUser } from '../services/auth';\n\nconst authHeader = () => {\n  const user = getCurrentUser();\n\n  if (user && user.accessToken) {\n    return { 'x-access-token': user.accessToken };\n  } else {\n    return {};\n  }\n};\n\nexport default authHeader;\n"],"names":["SUCCESS_CODE","INVALID_TOKEN","VALID_TOKEN","emailRegExp","API_URL","process","GITHUB_API","_extends","Object","assign","target","i","arguments","length","source","key","prototype","hasOwnProperty","call","apply","this","UserAdmin","forwardRef","props","ref","React","StyledIcon","viewBox","a11yTitle","fill","stroke","strokeWidth","d","displayName","_props","navigate","useNavigate","useState","redirect","setRedirect","email","password","loginInfo","setLoginInfo","hideIncorrect","setHideIncorrect","useEffect","validate","checkAuth","to","Box","width","height","background","justify","align","round","pad","gap","border","size","Text","Form","value","onSubmit","login","then","result","accessToken","catch","onChange","FormField","name","placeholder","type","autoComplete","color","hidden","direction","Button","plain","label","axios","res","data","localStorage","setItem","JSON","stringify","verifyToken","headers","authHeader","userId","getCurrentUser","id","logout","removeItem","parse","getItem","user"],"sourceRoot":""}