(this["webpackJsonpadriancleung-app"]=this["webpackJsonpadriancleung-app"]||[]).push([[11],{111:function(t,n,e){"use strict";e.d(n,"d",(function(){return r})),e.d(n,"c",(function(){return a})),e.d(n,"e",(function(){return u})),e.d(n,"f",(function(){return c})),e.d(n,"a",(function(){return s})),e.d(n,"b",(function(){return o}));var r=200,a="INVALID_TOKEN",u="VALID_TOKEN",c=/^(([^<>()[\]\\.,;:\s@"]+(\.[^<>()[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/,s="https://api.adrianleung.dev",o="https://api.github.com"},117:function(t,n,e){"use strict";e.d(n,"c",(function(){return f})),e.d(n,"d",(function(){return d})),e.d(n,"b",(function(){return l})),e.d(n,"a",(function(){return b}));var r=e(118),a=e.n(r),u=e(120),c=e(121),s=e.n(c),o=e(111),i=e(119),f=function(){var t=Object(u.a)(a.a.mark((function t(n,e){var r;return a.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,s.a.post("".concat(o.a,"/auth/login"),{email:n,password:e});case 2:return(r=t.sent).data.accessToken&&localStorage.setItem("user",JSON.stringify(r.data)),t.abrupt("return",r.data);case 5:case"end":return t.stop()}}),t)})));return function(n,e){return t.apply(this,arguments)}}(),p=function(){var t=Object(u.a)(a.a.mark((function t(){return a.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,s.a.post("".concat(o.a,"/auth/verify"),null,{headers:Object(i.a)()});case 3:if(t.sent.data.userId!==l().id){t.next=8;break}return t.abrupt("return",o.e);case 8:return t.abrupt("return",o.c);case 9:t.next=14;break;case 11:return t.prev=11,t.t0=t.catch(0),t.abrupt("return",o.c);case 14:case"end":return t.stop()}}),t,null,[[0,11]])})));return function(){return t.apply(this,arguments)}}(),d=function(){localStorage.removeItem("user")},l=function(){return JSON.parse(localStorage.getItem("user"))},b=function(){if(!l())return o.c;p().then((function(t){return t}))}},119:function(t,n,e){"use strict";var r=e(117);n.a=function(){var t=Object(r.b)();return t&&t.accessToken?{"x-access-token":t.accessToken}:{}}},276:function(t,n,e){"use strict";e.r(n);var r=e(0),a=e.n(r),u=e(7),c=e(117);n.default=function(t){return Object(r.useEffect)((function(){Object(c.d)()}),[]),a.a.createElement(u.a,{to:"/login"})}}}]);
//# sourceMappingURL=11.14300ea8.chunk.js.map