"use strict";(self.webpackChunkadriancleung_app=self.webpackChunkadriancleung_app||[]).push([[371],{4423:function(r,n,t){t.d(n,{LD:function(){return a},M:function(){return u},T5:function(){return c},c7:function(){return s},fs:function(){return e}});var e="INVALID_TOKEN",u="VALID_TOKEN",a=/^(([^<>()[\]\\.,;:\s@"]+(\.[^<>()[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/,c="https://api.adrianleung.dev",s="https://api.github.com"},6371:function(r,n,t){t.r(n);var e=t(2791),u=t(6871),a=t(746),c=t(184);n.default=function(){return(0,e.useEffect)((function(){(0,a.kS)()}),[]),(0,c.jsx)(u.Fg,{to:"/login"})}},746:function(r,n,t){t.d(n,{kS:function(){return p},ts:function(){return l},wt:function(){return v},x4:function(){return i}});var e=t(4165),u=t(5861),a=t(4569),c=t.n(a),s=t(4423),o=t(3301),i=function(){var r=(0,u.Z)((0,e.Z)().mark((function r(n,t){var u;return(0,e.Z)().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,c().post("".concat(s.T5,"/login"),{email:n,password:t});case 2:return(u=r.sent).data.accessToken&&localStorage.setItem("user",JSON.stringify(u.data)),r.abrupt("return",u.data);case 5:case"end":return r.stop()}}),r)})));return function(n,t){return r.apply(this,arguments)}}(),f=function(){var r=(0,u.Z)((0,e.Z)().mark((function r(){return(0,e.Z)().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.prev=0,r.next=3,c().post("".concat(s.T5,"/verify"),null,{headers:(0,o.Z)()});case 3:if(r.sent.data.userId!==l().userId){r.next=8;break}return r.abrupt("return",s.M);case 8:return r.abrupt("return",s.fs);case 9:r.next=14;break;case 11:return r.prev=11,r.t0=r.catch(0),r.abrupt("return",s.fs);case 14:case"end":return r.stop()}}),r,null,[[0,11]])})));return function(){return r.apply(this,arguments)}}(),p=function(){localStorage.removeItem("user")},l=function(){return JSON.parse(localStorage.getItem("user"))},v=function(){var r=(0,u.Z)((0,e.Z)().mark((function r(){var n;return(0,e.Z)().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(!l()){r.next=13;break}return r.prev=1,r.next=4,f();case 4:return n=r.sent,r.abrupt("return",n);case 8:return r.prev=8,r.t0=r.catch(1),r.abrupt("return",s.fs);case 11:r.next=14;break;case 13:return r.abrupt("return",s.fs);case 14:case"end":return r.stop()}}),r,null,[[1,8]])})));return function(){return r.apply(this,arguments)}}()},3301:function(r,n,t){var e=t(746);n.Z=function(){var r=(0,e.ts)();return r&&r.accessToken?{authorization:"Bearer ".concat(r.accessToken)}:{}}}}]);
//# sourceMappingURL=371.b0f6ac8c.chunk.js.map