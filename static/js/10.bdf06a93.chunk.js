(this["webpackJsonpadriancleung-app"]=this["webpackJsonpadriancleung-app"]||[]).push([[10],{123:function(e,t,n){"use strict";n.d(t,"d",(function(){return a})),n.d(t,"c",(function(){return r})),n.d(t,"e",(function(){return c})),n.d(t,"f",(function(){return u})),n.d(t,"a",(function(){return i})),n.d(t,"b",(function(){return o}));var a=200,r="INVALID_TOKEN",c="VALID_TOKEN",u=/^(([^<>()[\]\\.,;:\s@"]+(\.[^<>()[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/,i="https://api.adrianleung.dev",o="https://api.github.com"},131:function(e,t,n){"use strict";n.d(t,"c",(function(){return l})),n.d(t,"d",(function(){return p})),n.d(t,"b",(function(){return m})),n.d(t,"a",(function(){return f}));var a=n(136),r=n.n(a),c=n(137),u=n(138),i=n.n(u),o=n(123),s=n(133),l=function(){var e=Object(c.a)(r.a.mark((function e(t,n){var a;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,i.a.post("".concat(o.a,"/auth/login"),{email:t,password:n});case 2:return(a=e.sent).data.accessToken&&localStorage.setItem("user",JSON.stringify(a.data)),e.abrupt("return",a.data);case 5:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),d=function(){var e=Object(c.a)(r.a.mark((function e(){return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,i.a.post("".concat(o.a,"/auth/verify"),null,{headers:Object(s.a)()});case 3:if(e.sent.data.userId!==m().id){e.next=8;break}return e.abrupt("return",o.e);case 8:return e.abrupt("return",o.c);case 9:e.next=14;break;case 11:return e.prev=11,e.t0=e.catch(0),e.abrupt("return",o.c);case 14:case"end":return e.stop()}}),e,null,[[0,11]])})));return function(){return e.apply(this,arguments)}}(),p=function(){localStorage.removeItem("user")},m=function(){return JSON.parse(localStorage.getItem("user"))},f=function(){if(!m())return o.c;d().then((function(e){return e})).catch((function(e){return o.c}))}},133:function(e,t,n){"use strict";var a=n(131);t.a=function(){var e=Object(a.b)();return e&&e.accessToken?{"x-access-token":e.accessToken}:{}}},275:function(e,t,n){"use strict";n.r(t);var a=n(129),r=n(0),c=n.n(r),u=n(110),i=n(272),o=n(277),s=n(267),l=n(268),d=n(134);function p(){return(p=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e}).apply(this,arguments)}var m=function(e){return c.a.createElement(d.a,p({viewBox:"0 0 24 24",a11yTitle:"UserAdmin"},e),c.a.createElement("path",{fill:"none",stroke:"#000",strokeWidth:"2",d:"M8,11 C10.7614237,11 13,8.76142375 13,6 C13,3.23857625 10.7614237,1 8,1 C5.23857625,1 3,3.23857625 3,6 C3,8.76142375 5.23857625,11 8,11 Z M13.0233822,13.0234994 C11.7718684,11.7594056 10.0125018,11 8,11 C4,11 1,14 1,18 L1,23 L8,23 M10,19.5 C10,20.88 11.12,22 12.5,22 C13.881,22 15,20.88 15,19.5 C15,18.119 13.881,17 12.5,17 C11.12,17 10,18.119 10,19.5 L10,19.5 Z M23,15 L20,12 L14,18 M17.5,14.5 L20.5,17.5 L17.5,14.5 Z"}))},f=n(131),h=n(7),b=n(123);t.default=function(e){var t=Object(h.g)(),n=Object(r.useState)(!1),d=Object(a.a)(n,2),p=d[0],g=d[1],v=Object(r.useState)({email:"",password:""}),w=Object(a.a)(v,2),O=w[0],E=w[1],j=Object(r.useState)(!0),k=Object(a.a)(j,2),y=k[0],C=k[1];return Object(r.useEffect)((function(){Object(f.a)()===b.e&&g(!0)}),[]),p?c.a.createElement(h.a,{to:"/admin"}):c.a.createElement(u.a,{width:"100vw",height:"100vh",background:"dark-3",justify:"center",align:"center"},c.a.createElement(u.a,{width:"medium",height:"medium",background:"white",round:"medium",pad:"small",gap:"medium",align:"center",border:!0},c.a.createElement(m,{size:"large"}),c.a.createElement(i.a,null,"Welcome!"),c.a.createElement(u.a,{height:"100%"},c.a.createElement(o.a,{value:O,onSubmit:function(){Object(f.c)(O.email,O.password).then((function(e){null!==e.accessToken?t.push("/admin"):C(!1)})).catch((function(){C(!1)}))},onChange:function(e){return E(e)}},c.a.createElement(u.a,{height:"100%",gap:"medium"},c.a.createElement(u.a,{gap:"small"},c.a.createElement(s.a,{name:"email",placeholder:"Username",type:"email",autoComplete:"email"}),c.a.createElement(s.a,{name:"password",placeholder:"Password",type:"password",autoComplete:"password"})),c.a.createElement(i.a,{color:"red",hidden:y},"Incorrect username or password"),c.a.createElement(u.a,{direction:"row",justify:"center"},c.a.createElement(l.a,{plain:!0,label:"Login",type:"submit"})))))))}}}]);
//# sourceMappingURL=10.bdf06a93.chunk.js.map